(()=>{"use strict";var t={4220:()=>{function t(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function r(r,e){if(r){if("string"==typeof r)return t(r,e);var n={}.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(r,e):void 0}}function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t){var r=function(t){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=n(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(r)?r:r+""}function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function a(t,r,e){return r&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return s(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function s(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}var l=[[2,3,4,5],[2,7],[0,1,3,8],[2,0,4,9],[3,0,5,10],[0,4,11,6],[5,12],[1,8,13],[2,7,14,9],[3,8,10,15],[9,4,11,16],[5,12,10,17],[6,11,18],[7,14],[13,8,15,19],[9,14,16,20],[10,15,17,21],[16,11,18,22],[12,17],[14,20],[15,19,21],[16,20,22],[17,21]],f=[[0,2,8],[0,3,9],[0,4,10],[0,5,11],[1,2,3],[1,7,13],[2,8,14],[2,3,4],[3,9,15],[3,4,5],[3,2,1],[4,3,2],[4,5,6],[4,10,16],[5,4,3],[5,11,17],[6,5,4],[6,12,18],[7,8,9],[8,9,10],[8,2,0],[8,14,19],[9,8,7],[9,10,11],[9,3,0],[9,15,20],[10,4,0],[10,9,8],[10,11,12],[10,16,21],[11,10,9],[11,5,0],[11,17,22],[12,11,10],[13,7,1],[13,14,15],[14,8,2],[14,15,16],[15,14,13],[15,16,17],[15,9,3],[16,15,14],[16,10,4],[16,17,18],[17,16,15],[17,11,5],[18,12,6],[18,17,16],[19,14,8],[19,20,21],[20,15,9],[20,21,22],[21,20,19],[21,16,10],[22,21,20],[22,17,11]],c=function(){function t(){e(this,t),this.SideToPlay=1,this.OutsideGoats=15,this.CapturedGoats=0,this.CurrentPosition=["T","E","E","T","T","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E","E"],this.Hash=0,this.Result=-1}return a(t,[{key:"getLegalActions",value:function(){var t=this,r=[];return 1===this.SideToPlay?this.OutsideGoats>0?this.CurrentPosition.forEach((function(t,e){"E"===t&&r.push([-1,-1,e])})):this.CurrentPosition.forEach((function(e,n){if("G"===e){var o,i=u(l[n]);try{for(i.s();!(o=i.n()).done;){var a=o.value;"E"===t.CurrentPosition[a]&&r.push([n,-1,a])}}catch(t){i.e(t)}finally{i.f()}}})):this.CurrentPosition.forEach((function(e,n){if("T"===e){for(var o=0,i=f;o<i.length;o++){var a=i[o];a[0]===n&&"G"===t.CurrentPosition[a[1]]&&"E"===t.CurrentPosition[a[2]]&&r.push(a)}var s,c=u(l[n]);try{for(c.s();!(s=c.n()).done;){var h=s.value;"E"===t.CurrentPosition[h]&&r.push([n,-1,h])}}catch(t){c.e(t)}finally{c.f()}}})),r}},{key:"generateSuccessor",value:function(r,e){var n=new t;if(n.OutsideGoats=this.OutsideGoats,n.Result=this.Result,n.SideToPlay=(this.SideToPlay+1)%2,n.CurrentPosition=this.CurrentPosition.slice(0),n.CapturedGoats=this.CapturedGoats,d(r,[0,0,0]))n.Result=n.SideToPlay;else if(-1===r[0])n.OutsideGoats--,n.CurrentPosition[r[2]]="G";else{var o=n.CurrentPosition[r[0]];n.CurrentPosition[r[0]]="E",n.CurrentPosition[r[2]]=o,-1!==r[1]&&(n.CurrentPosition[r[1]]="E",n.CapturedGoats++)}var i=n.OutsideGoats;n.CurrentPosition.forEach((function(t){"G"===t&&i++})),0===i?n.Result=0:0===n.getLegalActions().length&&(n.Result=this.SideToPlay),n.Hash=0;for(var a=0;a<n.CurrentPosition.length;a++)"T"===n.CurrentPosition[a]?n.Hash+=2:"G"===n.CurrentPosition[a]&&(n.Hash+=1),n.Hash*=4;n.Hash*=4,n.Hash+=n.OutsideGoats,n.Hash*=2,n.Hash+=n.SideToPlay;for(var u=0,s=e.Pointer-1;s>=0;s--)if(e.InternalArray[s].Hash===n.Hash&&u++,u>1){n.Result=2,console.log("draw");break}return n}}])}(),h=function(){return a((function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;e(this,t),this.InternalArray=new Array(r),this.Pointer=0}),[{key:"push",value:function(t){this.InternalArray[this.Pointer]=t,this.Pointer+=1}},{key:"pop",value:function(){this.Pointer-=1}}])}(),y=function(){function t(){e(this,t),this.Nodes=new Array(256),this.Data=null}return a(t,[{key:"find",value:function(t){return function t(r,e,n){var o=255&e;return 1===r&&null!=n.Nodes[e]?n.Nodes[e].Data:null!=n.Nodes[o]?t(r-1,(e-=255&e)/256,n.Nodes[o]):null}(7,t,this)}},{key:"insert",value:function(r,e){!function r(e,n,o,i){if(1===e)i.Nodes[n]=new t,i.Nodes[n].Data=o;else{var a=255&n;null==i.Nodes[a]&&(i.Nodes[a]=new t),r(e-1,(n-=255&n)/256,o,i.Nodes[a])}}(7,r,e,this)}}])}(),v=function(){return a((function t(){e(this,t),this.Index=0,this.History=new h}),[{key:"evaluate",value:function(t,r,e){function n(t){return 0===e?t:-t}if(0===t.Result)return n(1e4);if(1===t.Result)return n(-1e4);if(2===t.Result)return-5e3;var o=0,i=t.OutsideGoats;t.CurrentPosition.forEach((function(t){"G"===t&&i++}));var a=0,u=0;return r.forEach((function(t){t[1]>-1?u++:a++})),o-=4*i,0===t.SideToPlay?(o+=a,o+=2*u):t.CurrentPosition.forEach((function(r,e){"T"===r&&(l[e].forEach((function(r){"E"===t.CurrentPosition[r]&&(o+=1)})),f.forEach((function(r){r[0]===e&&"G"===t.CurrentPosition[r[1]]&&"E"===t.CurrentPosition[r[2]]&&(o+=2)})))})),n(o)}},{key:"getAction",value:function(t){for(var r,e=this,n=0,o=0,i=this.Index,a=this.History,u=new y,s=function(t,r,l,f,c){a.push(t);var h,y=t.getLegalActions(),v=[0,0,0];if(r<1||0===y.length||-1!==t.Result)return a.pop(),o++,[e.evaluate(t,y,i),[0,0,0]];var p=u.find(t.Hash);if(null!=p){if(p[1]>=r){if(p[2]===p[3])return a.pop(),[p[2],p[0]];if(p[2]>c)return a.pop(),[p[2],p[0]];if(p[3]<f)return a.pop(),[p[3],p[0]];f=Math.max(f,p[2]),c=Math.min(c,p[3])}for(var b=0;b<y.length;b++)if(d(y[b],p[0])){y.splice(b,1),y.splice(0,0,p[0]);break}}if(l===i){h=Number.NEGATIVE_INFINITY;for(var m=0;m<y.length;m++){var E=s(t.generateSuccessor(y[m],a),r-1,(l+1)%2,f,c)[0];if(n++,h<E&&(h=E,v=y[m]),h>=c)break;h>f&&(f=h)}}else{h=Number.POSITIVE_INFINITY;for(var P=0;P<y.length;P++){var g=s(t.generateSuccessor(y[P],a),r-1,(l+1)%2,f,c)[0];if(n++,h>g&&(v=y[P],h=g),h<=f)break;c>h&&(c=h)}}return a.pop(),h<=f?u.insert(t.Hash,[v,r,Number.NEGATIVE_INFINITY,h]):h>=c?u.insert(t.Hash,[v,r,h,Number.POSITIVE_INFINITY]):u.insert(t.Hash,[v,r,h,h]),[h,v]},l=1;;)o=0,r=s(t,l,this.Index,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),"undefined"!=typeof self&&self.postMessage?self.postMessage([r[0],r[1],l,n,o]):"function"==typeof postMessage&&postMessage([r[0],r[1],l,n,o]),l++}}])}();function d(t,r){if(!t||!r)return!1;if(t.length!==r.length)return!1;for(var e=0;e<t.length;e++)if(t[e]instanceof Array&&r[e]instanceof Array){if(!d(t[e],r[e]))return!1}else if(t[e]!==r[e])return!1;return!0}function p(e){var n,o,i=new c;return i.SideToPlay=e.SideToPlay,i.CurrentPosition=function(r){if(Array.isArray(r))return t(r)}(o=e.CurrentPosition)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||r(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i.OutsideGoats=e.OutsideGoats,i.CapturedGoats=null!==(n=e.CapturedGoats)&&void 0!==n?n:0,i.Result=e.Result,i.Hash=e.Hash||0,i}self.onmessage=function(t){var e,n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;s=!1}else for(;!(s=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.data,4),o=n[0],i=n[1],a=n[2],u=n[3];if("alphabetawithmemory"===i.toLowerCase()){(e=new v).Index=a,e.History=new h(500);for(var s=0;s<u.Pointer;s++)e.History.push(p(u.InternalArray[s]));var l=e.getAction(p(o));self.postMessage(l)}else self.postMessage([0,[-1,-1,-1],0,0,0])}}},r={};function e(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return t[n](i,i.exports,e),i.exports}e.m=t,e.c=r,e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),(()=>{e.S={};var t={},r={};e.I=(n,o)=>{o||(o=[]);var i=r[n];if(i||(i=r[n]={}),!(o.indexOf(i)>=0)){if(o.push(i),t[n])return t[n];e.o(e.S,n)||(e.S[n]={}),e.S[n];var a=[];return t[n]=a.length?Promise.all(a).then((()=>t[n]=1)):1}}})(),e(4220)})();